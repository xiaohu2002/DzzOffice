<!--{template common/header_simple}-->
<link rel="stylesheet" type="text/css" href="static/dzzicon/materialdesignicons.min.css">
<link rel="stylesheet" type="text/css" href="static/css/style.min.css">
<style>
	html, body{
		overflow:auto;
	}
	<!--{if $_G[setting][loginset][transparency]}-->
	.card{
		background-color:$_G[setting][loginset][transparency];
	}
	.card:hover{
		background-color:$_G[setting][loginset][transparency];
	}
	<!--{/if}-->
</style>
<!--[if lt IE 9]>
  <script src="static/js/jquery.placeholder.js" type="text/javascript"></script>
<![endif]-->
<script type="text/javascript" src="user/scripts/login.js?{VERHASH}"></script>
<!--{eval $loginhash = 'L'.random(4);}-->
<!--{if !empty($_GET['inajax'])}--><button type="button" class="close" data-bs-dismiss="modal" aria-hidden="true">×</button><!--{/if}-->
<div class="row vh-100" id="lostpw_container_$loginhash" style="position: absolute;width: 100%">
  <div class="col-md-6 col-lg-7 col-xl-8 d-none d-md-block">

    <div class="d-flex vh-100">
      <div class="p-5 align-self-end">
         <!--{if $_G[setting][loginset][subtitle]}--><h1>$_G[setting][loginset][subtitle]</h1><!--{/if}-->
        <br><br><br>
        <!--{if $_G[setting][metadescription]}--><p class="text-white">$_G[setting][metadescription]</p><!--{/if}-->
      </div>
    </div>

  </div>

  <div class="col-md-6 col-lg-5 col-xl-4 align-self-center">
    <div class="p-5">
      <div class="text-center">
        <img alt="light year admin" src="{eval echo $_G['setting']['sitelogo']?'index.php?mod=io&op=thumbnail&size=small&path='.dzzencode('attach::'.$_G['setting']['sitelogo']):'static/image/common/logo.png';}">
      </div>
      <h2 class="text-center">{lang getpassword}</h2>
      <form class="signin-form needs-validation" method="post" autocomplete="off" id="lostpwform_$loginhash" role="form" onsubmit="return validate(this);" action="user.php?mod=login&op=logging&action=getpasswd&uid=$uid&id=$hashid">
				<input type="hidden" name="formhash" value="{FORMHASH}" />
				<div class="mb-3 text-center">
          {lang login_email}:$member[email]
        </div>
				<div class="mb-3">
					<label for="password3_$loginhash">{lang new_password}</label>
          <input class="form-control" type="password" id="newpasswd1" name="newpasswd1"  autocomplete="off" placeholder="{lang new_password}" required>
					<span id="chk_newpasswd1" class="help-block"> <span id="suc_newpasswd1"></span><kbd class="p_chk"></kbd></span>
        </div>
        <div class="mb-3">
          <label for="password3_$loginhash">{lang new_password_confirm}</label>
          <input class="form-control" type="password" id="newpasswd2" name="newpasswd2" autocomplete="off" placeholder="{lang new_password_confirm}" required>
					<span id="chk_newpasswd2" class="help-block">
						<span id="suc_newpasswd2"></span>
						<kbd class="p_chk"></kbd>
					</span>
        </div>
				
        <div class="mb-3 d-grid">
          <button class="btn btn-primary" type="submit" name="getpwsubmit" value="true">{lang identify_changes}</button>
        </div>
				 <p class="text-center">
					<a href="/">首页</a>
				</p>
      </form>
      <p class="text-center text-muted mb-0"><!--{template common/copyright}--></p>
    </div>
  </div>
</div>
<script type="text/javascript" src="user/scripts/register.js?{VERHASH}"></script>
<script type="text/javascript">
	function validate(form) {
		if(document.getElementById('newpasswd1').value == '') {
			document.getElementById('newpasswd1').focus();
			return false;
		} else if(document.getElementById('newpasswd2').value == '') {
			document.getElementById('newpasswd2').focus();
			return false;
		} else if(document.getElementById('newpasswd1').value != document.getElementById('newpasswd1').value) {
			document.getElementById('newpasswd2').focus();
			return false;
		}
		return true;
	}
	var strongpw = new Array();
	<!--{if $_G['setting']['strongpw']}-->
	<!--{loop $_G['setting']['strongpw'] $key $val}-->
	strongpw[$key] = $val;
	<!--{/loop}-->
	<!--{/if}-->
	var pwlength = <!--{if $_G['setting']['pwlength']}-->$_G['setting']['pwlength']<!--{else}-->0<!--{/if}-->;
		checkPwdComplexity(document.getElementById('newpasswd1'), document.getElementById('newpasswd2'));
	var loader;
  $(document).ajaxStart(function(){
      $("button:submit").html('加载中...').attr("disabled", true);
      loader = $('button:submit').lyearloading({
          opacity: 0.2,
          spinnerSize: 'nm'
      });
  }).ajaxStop(function(){
      loader.destroy();
      $("button:submit").html('{lang identify_changes}').attr("disabled", false);
  });
</script>
<script type="text/javascript" src="user/scripts/setbacksize.js?{VERHASH}"></script>
<!--{template common/footer}-->