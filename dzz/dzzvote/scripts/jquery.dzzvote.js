/*
 * @copyright   Leyun internet Technology(Shanghai)Co.,Ltd
 * @license     http://www.dzzoffice.com/licenses/license.txt
 * @package     DzzOffice
 * @link        http://www.dzzoffice.com
 * @author      zyx(zyx@dzz.cc)
 */
!function(t){t.fn.dzzvote=function(e){var o={ajaxurl:DZZSCRIPT+"?mod=dzzvote&op=ajax",voteid:""};e=t.extend(o,e);var i=t(this);t(this);var n=function(){i.find("#dzzvote_post_text_"+e.voteid+" .dzzvote-post-item-container .badge").each(function(t){this.innerHTML=t+1}),a()},a=function(){var t=parseInt(jQuery("#dzzvote_maxselect_num_"+e.voteid).val());if(jQuery("#dzzvotetype_"+e.voteid).val()>1)var o=i.find(".dzzvote-post-image-item").length;else o=i.find(".dzzvote-post-text-item").length;for(var n="",a=1;a<=o;a++)n+=a==t?'<option value="'+a+'" checked="checked">'+__lang.most_can_choose+a+__lang.item+"</option>":'<option value="'+a+'">'+__lang.most_can_choose+a+__lang.item+"</option>";jQuery("#dzzvote_maxselect_num_"+e.voteid).html(n)},d=function(){jQuery('<div class="input-group mb-3 dzzvote-post-text-item">  <span class="input-group-text"><span class="badge"></span></span>  <input type="text" class="form-control" name="voteitemnew[content][]" value="">  <input type="hidden"  name="voteitemnew[aid][]" value="">  <span class="input-group-text"><a href="javascript:;" data-itemid="0" class="dzzvote-post-delitem ibtn glyphicon glyphicon-trash" ></a></span></div>').appendTo("#dzzvote_post_text_"+e.voteid+" .dzzvote-post-item-container"),n()},s=function(){if(t(this).data("itemid")>0){var o=this;t.getJSON(e.ajaxurl+"&do=itemdelete&itemid="+t(this).data("itemid"),function(t){jQuery(o).closest(".dzzvote-post-image-item,.dzzvote-post-text-item").remove(),n()})}else jQuery(this).closest(".dzzvote-post-image-item,.dzzvote-post-text-item").remove(),n()};i.on("click.dzzvote",".dzzvote-post-additem",d),i.on("click.dzzvote",".dzzvote-post-delitem",s)}}(jQuery);