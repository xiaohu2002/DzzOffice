function smilies_show(e,t,i){var s;i&&!document.getElementById(i+"sml_menu")&&((s=document.createElement("div")).id=i+"sml_menu",s.style.display="none",s.className="da sllt",document.getElementById("append_parent").appendChild(s),(s=document.createElement("div")).id=e,s.style.overflow="hidden",document.getElementById(i+"sml_menu").appendChild(s));if("undefined"==typeof smilies_type){var l=document.createElement("script");l.type="text/javascript",l.src="data/cache/smilies_var.js?",document.getElementById("append_parent").appendChild(l),BROWSER.ie?l.onreadystatechange=function(){smilies_onload(e,t,i)}:l.onload=function(){smilies_onload(e,t,i)}}else smilies_onload(e,t,i)}function smilies_onload(e,t,l){if(l=l||"",smile=getcookie("smile").split("D"),"object"==typeof smilies_type){if(smile[0]&&smilies_array[smile[0]])CURRENTSTYPE=smile[0];else for(i in smilies_array){CURRENTSTYPE=i;break}var n=0;for(i in smiliestype='<div id="'+e+'_tb" class="tb tb_s cl"><ul class="nav nav-pills">',smilies_type)key=i.substring(1),smilies_type[i][0]&&(n++,smiliestype+='<li class="nav-item"><a class="'+(CURRENTSTYPE==key?'active"':"")+'" id="'+l+"stype_"+key+'" onclick="smilies_switch(\''+e+"', '"+t+"', "+key+", 1, '"+l+"');if(CURRENTSTYPE) {document.getElementById('"+l+"stype_'+CURRENTSTYPE).className='';}this.className='nav-link active';CURRENTSTYPE="+key+';doane(event);" href="javascript:;" hidefocus="true">'+smilies_type[i][0]+"</a></>");if(smiliestype+="</ul></div>",n<2&&(smiliestype=""),document.getElementById(e).innerHTML=smiliestype+'<div id="'+e+'_data" class="sllt-wrap"></div><div class="sllt_p" id="'+e+'_page"></div>',smilies_switch(e,t,CURRENTSTYPE,smile[1],l),smilies_fastdata="","fastpost"==l&&document.getElementById("fastsmilies")&&smilies_fast){var m=0;for(i=0;i<smilies_fast.length;i++)0==m&&(smilies_fastdata+="<tr>"),m=++m>3?0:m,s=smilies_array[smilies_fast[i][0]][smilies_fast[i][1]][smilies_fast[i][2]],smilieimg=STATICURL+"image/smiley/"+smilies_type["_"+smilies_fast[i][0]][1]+"/"+s[2],img[n]=new Image,img[n].src=smilieimg,smilies_fastdata+=s?"<td onmouseover=\"smilies_preview('"+l+"', 'fastsmiliesdiv', this, "+s[5]+")\" onmouseout=\"document.getElementById('smilies_preview').style.display = 'none'\" onclick=\""+("undefined"!=typeof wysiwyg?"insertSmiley("+s[0]+")":"seditor_insertunit('"+l+"', '"+s[1].replace(/'/,"\\'")+"')")+'" id="'+l+"smilie_"+s[0]+'_td"><img id="smilie_'+s[0]+'" width="'+s[3]+'" height="'+s[4]+'" src="'+smilieimg+'" alt="'+s[1]+'" />':"<td>";document.getElementById("fastsmilies").innerHTML='<table cellspacing="0" cellpadding="0"><tr>'+smilies_fastdata+"</tr></table>"}}}function seditor_insertunit(e,t,i,s,l){if(document.getElementById(e),i=isUndefined(i)?"":i,s=isUndefined(i)?0:s,l=isUndefined(l)?1:l,startlen=strlen(t),endlen=strlen(i),isUndefined(document.getElementById(e).selectionStart))if(document.selection&&document.selection.createRange){var n=document.selection.createRange();!n.text.length&&document.getElementById(e).sel&&(n=document.getElementById(e).sel,document.getElementById(e).sel=null),l?(""!=i&&(t=t+n.text+i),n.text=t.replace(/\r?\n/g,"\r\n"),s||(n.moveStart("character",-endlen),n.moveEnd("character",-endlen)),n.select()):n.text=t+i}else document.getElementById(e).value+=t;else if(l){var m=document.getElementById(e).selectionStart+0;""!=i&&(t=t+document.getElementById(e).value.substring(document.getElementById(e).selectionStart,document.getElementById(e).selectionEnd)+i),document.getElementById(e).value=document.getElementById(e).value.substr(0,document.getElementById(e).selectionStart)+t+document.getElementById(e).value.substr(document.getElementById(e).selectionEnd),s||(document.getElementById(e).selectionStart=m+strlen(t)-endlen,document.getElementById(e).selectionEnd=m+strlen(t)-endlen)}else t+=i,document.getElementById(e).value=document.getElementById(e).value.substr(0,document.getElementById(e).selectionStart)+t+document.getElementById(e).value.substr(document.getElementById(e).selectionEnd);document.getElementById(e).focus(),hideMenu(),BROWSER.ie&&doane()}function smilies_switch(e,t,i,l,n){if(l=l||1,smilies_array[i]&&smilies_array[i][l]){setcookie("smile",i+"D"+l,31536e3),smiliesdata='<table id="'+e+'_table" cellpadding="0" cellspacing="0"><tr>',j=k=0,img=[];for(var m=0;m<smilies_array[i][l].length;m++)j>=t&&(smiliesdata+="<tr>",j=0),s=smilies_array[i][l][m],smilieimg=STATICURL+"image/smiley/"+smilies_type["_"+i][1]+"/"+s[2],img[k]=new Image,img[k].src=smilieimg,smiliesdata+=s&&s[0]?"<td onmouseover=\"smilies_preview('"+n+"', '"+e+"', this, "+s[5]+')" onclick="'+("undefined"!=typeof wysiwyg?"insertSmiley("+s[0]+")":"seditor_insertunit('"+n+"', '"+s[1].replace(/'/,"\\'")+"')")+'" id="'+n+"smilie_"+s[0]+'_td"><img title="'+s[6]+'" alt="'+s[6]+'" id="smilie_'+s[0]+'" width="'+s[3]+'" height="'+s[4]+'" src="'+smilieimg+'" alt="'+s[1]+'" />':"<td>",j++,k++;smiliesdata+="</table>",smiliespage="",smilies_array[i].length>2&&(prevpage=(prevpage=parseInt(l)-1)<1?smilies_array[i].length-1:prevpage,nextpage=(nextpage=parseInt(l)+1)==smilies_array[i].length?1:nextpage,smiliespage='<div class="pull-left"><a href="javascript:;" onclick="smilies_switch(\''+e+"', '"+t+"', "+i+", "+prevpage+", '"+n+'\');doane(event);">上页</a><a href="javascript:;" onclick="smilies_switch(\''+e+"', '"+t+"', "+i+", "+nextpage+", '"+n+"');doane(event);\">下页</a></div>"+l+"/"+(smilies_array[i].length-1)),document.getElementById(e+"_data").innerHTML=smiliesdata,document.getElementById(e+"_page").innerHTML=smiliespage}}function smilies_preview(e,t,i,s){var l=document.getElementById("smilies_preview");l||((l=document.createElement("div")).id="smilies_preview",l.className="sl_pv",l.style.display="none",document.getElementById("append_parent").appendChild(l)),l.innerHTML='<img width="'+s+'" src="'+i.childNodes[0].src+'" />',mpos=fetchOffset(document.getElementById(t+"_data")),spos=fetchOffset(i),pos=spos.left>=mpos.left+document.getElementById(t+"_data").offsetWidth/2?"13":"24",showMenu({ctrlid:i.id,showid:t+"_data",menuid:l.id,pos:pos,layer:3})}