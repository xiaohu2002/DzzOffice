var imgReady=function(){var n=[],l=null,e=function(){for(var l=0;l<n.length;l++)n[l].end?n.splice(l--,1):n[l]();!n.length&&r()},r=function(){clearInterval(l),l=null};return function(r,o,t,a){var c,i,u,d,h,f=new Image;if(f.src=r,f.complete)return o.call(f),void(t&&t.call(f));i=f.width,u=f.height,f.onerror=function(){a&&a.call(f),c.end=!0,f=f.onload=f.onerror=null},(c=function(){try{d=f.width,h=f.height}catch(n){c.end=!0}(d!==i||h!==u||d*h>1024)&&(o.call(f),c.end=!0)})(),f.onload=function(){!c.end&&c(),t&&t.call(f),o.call(f),f=f.onload=f.onerror=null},c.end||(n.push(c),null===l&&(l=setInterval(e,40)))}}();